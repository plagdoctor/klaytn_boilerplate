const createPayload = (data) => ({
  jsonrpc: '2.0',
  id: ParseInt(Math.random() * 10000),
  params: [],
  data,
})

function CaverSubprovider(provider) {
  this.provider = provider
}

CaverSubprovider.prototype.emitPayload = function(payload, cb){
  this.engine.send(createPayload(payload), cb)
}

CaverSubprovider.prototype.setEngine = function(engine) {
  this.engine = engine
}

CaverSubprovider.prototype.handleRequest = function(payload, next, end) {
  this.provider.send(
    payload,
    (err, response) => {
      // if (err)
      //   return end(err)

      // if (response && response.error)
      //   return end(new Error(response.error.message))

      end(null, response.result)
    })
}

module.exports = CaverSubprovider
